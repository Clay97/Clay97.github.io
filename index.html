<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <title>
    
    Keep Running</title>
  
    <link rel="shortcut icon" href="/favicon.ico">
  
  <link rel="stylesheet" href="/css/style.css">
  
    <link rel="stylesheet" href="/fancybox/jquery.fancybox.min.css">
  
  <script src="/js/pace.min.js"></script>
</head>

<body>
<main class="content">
  <section class="jumbotron">
  <div class="video">
    
      <div class="video-frame">
        <img src="/images/ocean/overlay-hero.png" alt="Decorative image frame">
      </div>
    
    <div class="video-media">
      <video playsinline="" autoplay="" loop="" muted="" data-autoplay=""
             poster="/images/ocean/ocean.png" x5-video-player-type="h5">
        <source src="/images/ocean/ocean.mp4" type="video/mp4">
        <source src="/images/ocean/ocean.ogv" type="video/ogg">
        <source src="/images/ocean/ocean.webm" type="video/webm">
        <p>Your user agent does not support the HTML5 Video element.</p>
      </video>
      <div class="video-overlay"></div>
    </div>
    <div class="video-inner text-center text-white">
      <h1><a href="/">Keep Running</a></h1>
      <p>if you want it, you will achieve it .</p>
      <div><img src="/images/hexo-inverted.svg" class="brand" alt="Keep Running"></div>
    </div>
    <div class="video-learn-more">
      <a class="anchor" href="#landingpage"><i class="fe fe-mouse"></i></a>
    </div>
  </div>
</section>

<div id="landingpage">
  <section class="outer">
  <article class="articles">
    
    <h1 class="page-type-title"></h1>

    
      
        <article id="post-selenium点触验证码破解" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/07/05/selenium点触验证码破解/">selenium点触验证码破解</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/07/05/selenium点触验证码破解/" class="article-date">
  <time datetime="2019-07-05T11:17:21.872Z" itemprop="datePublished">2019-07-05</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>本文将向大家介绍点触验证码的识别，以12306登陆为例，相比于滑块验证码，他的识别更加困难，你不仅需要识别图中文字，还要将图片变为文字并获取坐标来模拟点击，这里我们应用平台来进行验证码的识别，我们只需要将验证码图片提交给平台，平台会返回识别结果在图片中的位置，然后我们解析位置坐标模拟点击，成功率很高，这里使用的是超级鹰。完整代码在<a href="https://github.com/Clay97/VerificationCode" target="_blank" rel="noopener">github</a>供大家参考。</p>
<p><img src="/images/captcha.png" alt="">    </p>
<ol>
<li>注册账号<br>首先我们需要注册超级鹰账号并申请软件ID，注册网页链接为：<a href="http://www.chaojiying.com/user/reg/" target="_blank" rel="noopener">http://www.chaojiying.com/user/reg/</a>,接着在用户中心添加软件ID。最后充值一些题分，你也可以关注公众号来获取1000题分，这些足够你测试使用。   </li>
<li>获取API<br>在官方网站下载python对应的API,链接为：<a href="http://www.chaojiying.com/api-14.html" target="_blank" rel="noopener">http://www.chaojiying.com/api-14.html</a>，是用request来实现的：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">import requests</span><br><span class="line">from hashlib import md5</span><br><span class="line"></span><br><span class="line">class Chaojiying_Client(object):</span><br><span class="line"></span><br><span class="line">    def __init__(self, username, password, soft_id):</span><br><span class="line">        self.username = username</span><br><span class="line">		password =  password.encode(&apos;utf8&apos;)</span><br><span class="line">        self.password = md5(password).hexdigest()</span><br><span class="line">        self.soft_id = soft_id</span><br><span class="line">        self.base_params = &#123;</span><br><span class="line">            &apos;user&apos;: self.username,</span><br><span class="line">            &apos;pass2&apos;: self.password,</span><br><span class="line">            &apos;softid&apos;: self.soft_id,</span><br><span class="line">        &#125;</span><br><span class="line">        self.headers = &#123;</span><br><span class="line">            &apos;Connection&apos;: &apos;Keep-Alive&apos;,</span><br><span class="line">            &apos;User-Agent&apos;: &apos;Mozilla/4.0 (compatible; MSIE 8.0; Windows NT 5.1; Trident/4.0)&apos;,</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    def PostPic(self, im, codetype):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        im: 图片字节</span><br><span class="line">        codetype: 题目类型 参考 http://www.chaojiying.com/price.html</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        params = &#123;</span><br><span class="line">            &apos;codetype&apos;: codetype,</span><br><span class="line">        &#125;</span><br><span class="line">        params.update(self.base_params)</span><br><span class="line">        files = &#123;&apos;userfile&apos;: (&apos;ccc.jpg&apos;, im)&#125;</span><br><span class="line">        r = requests.post(&apos;http://upload.chaojiying.net/Upload/Processing.php&apos;, data=params, files=files, headers=self.headers)</span><br><span class="line">        return r.json()</span><br><span class="line"></span><br><span class="line">    def ReportError(self, im_id):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        im_id:报错题目的图片ID</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        params = &#123;</span><br><span class="line">            &apos;id&apos;: im_id,</span><br><span class="line">        &#125;</span><br><span class="line">        params.update(self.base_params)</span><br><span class="line">        r = requests.post(&apos;http://upload.chaojiying.net/Upload/ReportError.php&apos;, data=params, headers=self.headers)</span><br><span class="line">        return r.json()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这里定义了一个Chaojiying_Client类，其构造函数接收三个函数，分别是超级鹰用户名，密码以及软件ID。<br>最重要的一个方法叫做PostPic()，它需要传入图片对象和验证码的代码，该方法会将图片对象和相关信息发给超级鹰的后台进行识别，然后将识别成功的JSON返回。<br>另一个方法叫做ReportError(),），它是发生错误的时候的回调，如果验证码识别错误，调用此方法会返回相应的题分。</p>
<ol start="3">
<li><p>初始化<br>初始化一些变量，如WebDriver、Chaojiying_Client等：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">#12306登陆账号</span><br><span class="line">EMAIL = &apos;UserName&apos;</span><br><span class="line">#12306登陆密码</span><br><span class="line">PASSWORD = &apos;Passworrd&apos;</span><br><span class="line">#超级鹰账号、密码、软件ID、验证码类型ID</span><br><span class="line">CHAOJIYING_USERNAME = &apos;UserName&apos;</span><br><span class="line">CHAOJIYING_PASSWORD = &apos;Passworrd&apos;</span><br><span class="line">CHAOJIYING_SOFT_ID =  123456</span><br><span class="line">CHAOJIYING_KIND = 9004</span><br><span class="line"></span><br><span class="line">class touch():</span><br><span class="line">    def __init__(self):</span><br><span class="line">        self.url = &apos;https://kyfw.12306.cn/otn/resources/login.html&apos;</span><br><span class="line">        self.browser = webdriver.Firefox()</span><br><span class="line">        self.wait = WebDriverWait(self.browser, 10)</span><br><span class="line">        self.email = EMAIL</span><br><span class="line">        self.password = PASSWORD</span><br><span class="line">		self.chaojiying = Chaojiying_Client(CHAOJIYING_USERNAME, CHAOJIYING_PASSWORD, CHAOJIYING_SOFT_ID)</span><br></pre></td></tr></table></figure>
</li>
<li><p>获取验证码<br>进入登陆见面，切换至账号登陆，输入账号密码</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">def open(self):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        打开网页输入用户名密码</span><br><span class="line">        :return: None</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        self.browser.get(self.url)</span><br><span class="line">        #切换至账号登陆</span><br><span class="line">        time.sleep(5)</span><br><span class="line">        login = self.wait.until(EC.presence_of_element_located((By.CLASS_NAME,&apos;login-hd-account&apos;)))</span><br><span class="line">        login.click()</span><br><span class="line">        email = self.wait.until(EC.presence_of_element_located((By.ID, &apos;J-userName&apos;)))</span><br><span class="line">        password = self.wait.until(EC.presence_of_element_located((By.ID, &apos;J-password&apos;)))</span><br><span class="line">        email.send_keys(self.email)</span><br><span class="line">		password.send_keys(self.password)</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>接下来,类似滑块验证码图像获取 一样，获取验证码图片的位置和大小，从网页截图里截取相应的验证码图片<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">def get_touclick_element(self):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        获取验证图片对象</span><br><span class="line">        :return: 图片对象</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        element = self.wait.until(EC.presence_of_element_located((By.ID, &apos;J-loginImg&apos;)))</span><br><span class="line">        return element</span><br><span class="line"></span><br><span class="line">    def get_position(self):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        获取验证码位置</span><br><span class="line">        :return: 验证码位置元组</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        element = self.get_touclick_element()</span><br><span class="line">        time.sleep(2)</span><br><span class="line">        location = element.location</span><br><span class="line">        size = element.size</span><br><span class="line">        top, bottom, left, right = location[&apos;y&apos;], location[&apos;y&apos;] + size[&apos;height&apos;], location[&apos;x&apos;], location[&apos;x&apos;] + size[&apos;width&apos;]</span><br><span class="line">        return (top, bottom, left, right)</span><br><span class="line"></span><br><span class="line">    def get_screenshot(self):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        获取网页截图</span><br><span class="line">        :return: 截图对象</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        screenshot = self.browser.get_screenshot_as_png()</span><br><span class="line">        screenshot = Image.open(BytesIO(screenshot))</span><br><span class="line">		return screenshot</span><br></pre></td></tr></table></figure></p>
<ol start="5">
<li><p>识别验证码<br>调用Chaojiying_Client对象的 PostPic()方法，即可把图片发送给超级鹰后台，这里发送的图像是字节流格式   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">def get_points(self, captcha_result):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        解析识别结果</span><br><span class="line">        :param captcha_result: 识别结果</span><br><span class="line">        :return: 转化后的结果</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        groups = captcha_result.get(&apos;pic_str&apos;).split(&apos;|&apos;)</span><br><span class="line">        locations = [[int(number) for number in group.split(&apos;,&apos;)] for group in groups]</span><br><span class="line">        return locations</span><br><span class="line"></span><br><span class="line">    def touch_click_words(self, locations):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        点击验证图片</span><br><span class="line">        :param locations: 点击位置</span><br><span class="line">        :return: None</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        for location in locations:</span><br><span class="line">            print(location)</span><br><span class="line">            ActionChains(self.browser).move_to_element_with_offset(self.get_touclick_element(), location[0],location[1]).click().perform()</span><br><span class="line">			time.sleep(1)</span><br></pre></td></tr></table></figure>
</li>
<li><p>点击登陆，判断是否登陆成功</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">def login(self):</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        点击验证按钮</span><br><span class="line">        :return: None</span><br><span class="line">        &quot;&quot;&quot;</span><br><span class="line">        button = self.wait.until(EC.element_to_be_clickable((By.ID, &apos;J-login&apos;)))</span><br><span class="line">		button.click()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>登陆成功之后会进入首页，首页中有搜索栏，我们通过能否获取搜索栏来判断是否登陆成功，如果失败重新开始验证。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">try:</span><br><span class="line">           self.wait.until(EC.presence_of_element_located((By.ID, &apos;search-input&apos;)),&apos;登陆失败&apos;)</span><br><span class="line">       except TimeoutException as e:</span><br><span class="line">           print(e)</span><br><span class="line">           #登陆方法</span><br><span class="line">		self.click()</span><br></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/05/selenium点触验证码破解/" data-id="cjxq28a7p0001k0uabucjm4yh"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
        <article id="post-selenium破解滑动验证码" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/07/04/selenium破解滑动验证码/">selenium破解滑动验证码</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/07/04/selenium破解滑动验证码/" class="article-date">
  <time datetime="2019-07-04T11:25:31.900Z" itemprop="datePublished">2019-07-04</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>今天下午研究了一下滑动验证码，并成功破解了滑动验证码，参考<a href="https://www.cnblogs.com/lhhhha/p/11055753.html" target="_blank" rel="noopener">博客</a>,对博客的内容以及自己的理解对代码进行一些改动，代码上传到我的<a href="https://github.com/Clay97/VerificationCode/blob/master/sliderCode.py" target="_blank" rel="noopener">github</a>,大家可以下载参考,下面我大概分析一下思路，希望对大家有所帮助：</p>
<ol>
<li>Selenium 对象的初始化<br>因为是用selenium进行模拟人为滑动，所以首先我们需要对Selenium对象初始化并模拟登陆：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">driver = webdriver.Firefox()</span><br><span class="line">   wait = WebDriverWait(driver, 20)</span><br><span class="line">driver.get(&apos;https://account.cnblogs.com/signin?returnUrl=https%3A%2F%2Fwww.cnblogs.com%2F&apos;)</span><br><span class="line"># 1、输入用户名与密码，并点击登录</span><br><span class="line">   email = wait.until(EC.presence_of_element_located((By.ID, &apos;LoginName&apos;)))</span><br><span class="line">   password = wait.until(EC.presence_of_element_located((By.ID, &apos;Password&apos;)))</span><br><span class="line">   email.send_keys(&apos;yourEmail&apos;)</span><br><span class="line">   time.sleep(0.2)</span><br><span class="line">   password.send_keys(&apos;yourPassword&apos;)</span><br><span class="line">   time.sleep(2)</span><br><span class="line">   submit = wait.until(EC.element_to_be_clickable((By.ID, &apos;submitBtn&apos;)))</span><br><span class="line">submit.click()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p>这里的测试网址是博客园的登陆界面，当用户输入用户名和密码后点击登陆时时会跳出滑动验证码。</p>
<ol start="2">
<li><p>获取有缺口与完整的图片<br>网页中并没有图片对应的url地址，所以我们需要对整个页面截图然后通过图片位置截取图片来获得我们需要的图片。<br>首先我们需要获得由缺口的图片，因为滑块默认是显示的，他会覆盖在缺口图片上面，所以我们需要将通过js代码隐藏后截图。<br>而完整的图片默认是隐藏的，我们需要用js代码将其显示。<br>之后统一进行截图以及截取操作，方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># 截取图片</span><br><span class="line">def cut_image(driver, name):</span><br><span class="line">   	#保存页面截图</span><br><span class="line">   	driver.save_screenshot(name)</span><br><span class="line">   	#获取滑动的图片</span><br><span class="line">   	image = driver.find_element_by_class_name(&apos;geetest_canvas_bg&apos;)</span><br><span class="line">   	#获取滑动图片的左 上 右 下的位置</span><br><span class="line">   	left = image.location[&apos;x&apos;]</span><br><span class="line">   	top = image.location[&apos;y&apos;]</span><br><span class="line">   	right = left + image.size[&apos;width&apos;]</span><br><span class="line">   	buttom = top + image.size[&apos;height&apos;]</span><br><span class="line">   	image_obj = Image.open(name)</span><br><span class="line">   	#截图</span><br><span class="line">   	img = image_obj.crop((left, top, right, buttom))</span><br><span class="line">   	return img</span><br><span class="line"></span><br><span class="line"># 获取有缺口的图片</span><br><span class="line">def getImage(driver):</span><br><span class="line">    #影藏滑块</span><br><span class="line">    js_code = &apos;&apos;&apos;</span><br><span class="line">           var x = document.getElementsByClassName(&quot;geetest_canvas_slice&quot;)[0].style.display = &quot;none&quot;;</span><br><span class="line">       &apos;&apos;&apos;</span><br><span class="line">    driver.execute_script(js_code)</span><br><span class="line">    image = cut_image(driver,&apos;img01.png&apos;)</span><br><span class="line">    return image</span><br><span class="line"></span><br><span class="line">#获得完整的图片</span><br><span class="line">def getFullImage(driver):</span><br><span class="line">    #显示完整的图片</span><br><span class="line">    js = &apos;&apos;&apos;</span><br><span class="line">                var x = document.getElementsByClassName(&quot;geetest_canvas_fullbg&quot;)[0].style.display = &quot;block&quot;;</span><br><span class="line">        &apos;&apos;&apos;</span><br><span class="line">    driver.execute_script(js)</span><br><span class="line">    image= cut_image(driver,&apos;img02.png&apos;)</span><br><span class="line">	return image</span><br></pre></td></tr></table></figure>
</li>
<li><p>比对两张图片，获取滑动距离<br>通过遍历每一个像素点(起始位置可以从小滑块右侧开始)，比较两张图片的像素点，如果各个像素点的差值小于我们设置的像素差，那么我们认为这两块像素点是一样，直到找个第一个不同的像素点时，我们返回x左边，为了减少误差，我们可以将左中的x减去7个像素后返回：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">def get_distance(image1, image2):</span><br><span class="line">   	# 比较的起始位置，从小滑块右侧开始比较</span><br><span class="line">   	start = 55</span><br><span class="line">   	# 像素差</span><br><span class="line">   	num = 60</span><br><span class="line">   	for x in range(start, image1.size[0]):</span><br><span class="line">       	for y in range(	image1.size[1]):</span><br><span class="line">           	# 获取image1完整图片每一个坐标的像素点</span><br><span class="line">           	rgb1 = image1.load()[x, y]</span><br><span class="line"></span><br><span class="line">           	# 获取image2缺口图片每一个坐标的像素点</span><br><span class="line">           	rgb2 = image2.load()[x, y]</span><br><span class="line">           	r = abs(rgb1[0] - rgb2[0])</span><br><span class="line">           	g = abs(rgb1[1] - rgb2[1])</span><br><span class="line">           	b = abs(rgb1[2] - rgb2[2])</span><br><span class="line">           	if not (r &lt; num and g &lt; num and b &lt; num):</span><br><span class="line">               	# 有误差 -7 像素</span><br><span class="line">				return x - 7</span><br></pre></td></tr></table></figure>
</li>
<li><p>根据偏移量获取移动轨迹<br>这里为了模拟认为的移动，我们首先采用匀加速运动，当移动到大于3/5的位置时，开始进行匀减速运动，每0.2我们对移动距离进行计算，并加入到移动轨迹的列表中。之后根据移动轨迹对滑块进行移动：   </p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">def get_track(distance):</span><br><span class="line">    # 移动轨迹</span><br><span class="line">    track = []</span><br><span class="line">    # 当前位移</span><br><span class="line">    curremt = 0</span><br><span class="line">    # 减速阈值</span><br><span class="line">    mid = distance* 3 / 5</span><br><span class="line">    #计算间隔</span><br><span class="line">    t = 0.2</span><br><span class="line">    # 初速度</span><br><span class="line">    v = 0</span><br><span class="line"></span><br><span class="line">    while curremt &lt; distance:</span><br><span class="line">        if curremt &lt;mid:</span><br><span class="line">            # 加速度 +6</span><br><span class="line">            a = 6</span><br><span class="line">        else:</span><br><span class="line">            #加速度 -7</span><br><span class="line">            a = -8</span><br><span class="line">        # 初速度 v0</span><br><span class="line">        v0 = v</span><br><span class="line">        # 当前速度 v = v0 + at</span><br><span class="line">        v = v0 +a * t</span><br><span class="line">        #移动距离 x = v0t + 1/2 * a * t * t</span><br><span class="line">        move = v0 * t+1/2 * a * t * t</span><br><span class="line">        #当前位移</span><br><span class="line">        curremt +=move</span><br><span class="line">        #加入轨迹</span><br><span class="line">        track.append(round(move))</span><br><span class="line">    return track</span><br><span class="line"></span><br><span class="line">def move_to_gap(driver, tracks):</span><br><span class="line">    slider = driver.find_element_by_class_name(&apos;geetest_slider_button&apos;)</span><br><span class="line">    # 为了观察移动轨迹,显示滑块</span><br><span class="line">    js_code = &apos;&apos;&apos;</span><br><span class="line">               var x = document.getElementsByClassName(&quot;geetest_canvas_slice&quot;)[0].style.display = &quot;block&quot;;</span><br><span class="line">           &apos;&apos;&apos;</span><br><span class="line">    driver.execute_script(js_code)</span><br><span class="line">    time.sleep(2)</span><br><span class="line">    # 点击摁住滑动按钮</span><br><span class="line">    ActionChains(driver).click_and_hold(slider).perform()</span><br><span class="line">    # 根据轨迹移动滑块</span><br><span class="line">    for x in tracks:</span><br><span class="line">        ActionChains(driver).move_by_offset(xoffset=x,yoffset=0).perform()</span><br><span class="line">    # 释放滑块</span><br><span class="line">    ActionChains(driver).release().perform()</span><br></pre></td></tr></table></figure>
</li>
<li><p>其他优化<br>因为模拟并不能百分百成功，所以我们对当前网页的title进行判断，当页面没有跳转时说明验证码失败，重新获取图片并进行比较模拟滑块登陆，直到验证成功。</p>
</li>
</ol>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/07/04/selenium破解滑动验证码/" data-id="cjxq28a9y0008k0uajbey9p1x"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
        <article id="post-scrapy爬取boss直聘职位信息" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/06/30/scrapy爬取boss直聘职位信息/">scrapy爬取boss直聘职位信息</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/06/30/scrapy爬取boss直聘职位信息/" class="article-date">
  <time datetime="2019-06-30T02:55:06.534Z" itemprop="datePublished">2019-06-30</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>27号下午的时候朋友说软考可以查分了，于是我便怀着忐忑的心情去官网查了一下分，说实话当时还是比较紧张的，但是看到成绩时心里总是是松了一口气（甚至还有一些小激动），最终以54分和55分的成绩通过了软件设计师的考试，两个月的学习总算是没有白费。<br>昨天又花了一下午的时间对boss直聘上有关爬虫的职位信息进行了爬取，使用的scrapy框架，项目在我的<a href="https://github.com/Clay97/bossCrawl" target="_blank" rel="noopener">github</a>上，大家可以参考或提出建议。  </p>
<ol>
<li><p>对<strong>item</strong>进行定义：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">class BosscrawlItem(scrapy.Item):</span><br><span class="line">    # define the fields for your item here like:</span><br><span class="line">    # name = scrapy.Field()</span><br><span class="line">    #职位名称</span><br><span class="line">    position = scrapy.Field()</span><br><span class="line">    # 薪水</span><br><span class="line">    salary = scrapy.Field()</span><br><span class="line">    #公司地点</span><br><span class="line">    place = scrapy.Field()</span><br><span class="line">    #需求</span><br><span class="line">    require = scrapy.Field()</span><br><span class="line">    #学历要求</span><br><span class="line">    education = scrapy.Field()</span><br><span class="line">    #公司名称</span><br><span class="line">    company = scrapy.Field()</span><br><span class="line">    #公司类型</span><br><span class="line">    type = scrapy.Field()</span><br><span class="line">    #融资阶段</span><br><span class="line">    stage = scrapy.Field()</span><br><span class="line">    #公司规模</span><br><span class="line">    scale = scrapy.Field()</span><br></pre></td></tr></table></figure>
</li>
<li><p>提取网页信息封装item对象  </p>
</li>
</ol>
<p><img src="/images/bossinfo.png" alt=""><br>place、require 、education和type 、stage、scale 分别在图中圈住的位置，在html中在一个p标签中，可以通过如下代码进行提取：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">place,require,education=info.xpath(&quot;//div[@class=&apos;info-primary&apos;]/p/text()&quot;).extract()  </span><br><span class="line">type,stage,scale=info.xpath(&quot;//div[@class=&apos;company-text&apos;]/p/text()&quot;).extract()</span><br></pre></td></tr></table></figure></p>
<p>但是在爬取过程中发现并非所有的p标签中都是3个字段 。  </p>
<p><img src="/images/bossinfo01.png" alt=""><br>require字段由两部分组成</p>
<p><img src="/images/bossinfo02.png" alt=""><br>没有stage（融资阶段）字段</p>
<p>所以我们需要对字段的长度进行判断，完整代码如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">def parse(self, response):</span><br><span class="line">    #提取职位列表</span><br><span class="line">    jobs = response.xpath(&quot;//div[@class=&apos;job-primary&apos;]&quot;).extract()</span><br><span class="line">    #遍历职位列表，提取信息</span><br><span class="line">    for job in jobs:</span><br><span class="line">        positionitem = BosscrawlItem()</span><br><span class="line">        info = scrapy.Selector(text=job)</span><br><span class="line">        positionitem[&apos;position&apos;] =info.xpath(&quot;//div[@class=&apos;job-title&apos;]/text()&quot;).extract_first()</span><br><span class="line">        positionitem[&apos;salary&apos;] = info.xpath(&quot;//span[@class=&apos;red&apos;]/text()&quot;).extract_first()</span><br><span class="line">        info_primary = info.xpath(&quot;//div[@class=&apos;info-primary&apos;]/p/text()&quot;).extract()</span><br><span class="line">        positionitem[&apos;place&apos;] = info_primary[0]</span><br><span class="line">        positionitem[&apos;education&apos;]  =info_primary[-1]</span><br><span class="line">        positionitem[&apos;require&apos;] = info_primary[1]</span><br><span class="line">        if len(info_primary)==4:</span><br><span class="line">            positionitem[&apos;require&apos;]=info_primary[1]+&apos; &apos;+info_primary[2]</span><br><span class="line">        positionitem[&apos;company&apos;] = info.xpath(&quot;//div[@class=&apos;company-text&apos;]/h3/a/text()&quot;).extract_first()</span><br><span class="line">        info_company = info.xpath(&quot;//div[@class=&apos;company-text&apos;]/p/text()&quot;).extract()</span><br><span class="line">        positionitem[&apos;type&apos;] = info_company[0]</span><br><span class="line">        positionitem[&apos;scale&apos;] = info_company[-1]</span><br><span class="line">        positionitem[&apos;stage&apos;]=&apos;&apos;</span><br><span class="line">        if len(info_company)==3:</span><br><span class="line">            positionitem[&apos;stage&apos;]=info_company[1]</span><br><span class="line">        yield positionitem</span><br></pre></td></tr></table></figure></p>
<ol start="3">
<li>提取跟进链接<br>链接在最下面的翻页中href中：<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">urls =response.xpath(&quot;//div[@class=&apos;page&apos;]/a/@href&quot;).extract()</span><br></pre></td></tr></table></figure>
</li>
</ol>
<p><img src="/images/bosspage.png" alt="">  </p>
<p>其中已经选中的页码的href为<strong>javascript:;</strong>,我们直接跳过，第一个a标签的href为上一页的链接，当你选中第一页时，他的page=0，但是他的内容返回内容是从和page=1的内容是一样的，所以我们遍历的时候从第二个元素开始遍历,之后拼接url并返回：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for url in urls[1:]:</span><br><span class="line">    if &apos;javascript&apos;in url:</span><br><span class="line">        continue</span><br><span class="line">    item = &apos;https://www.zhipin.com&apos;+url</span><br><span class="line">    yield scrapy.Request(url=item,callback=self.parse)</span><br></pre></td></tr></table></figure></p>
<ol start="4">
<li>数据存储<br>在测试阶段，我将数据存储在本地的文件中，之后待测试完毕后存储在mongo数据库中，在pipelines.py中写了两个类<strong>BosscrawlPipeline</strong>,<strong>MongoPipeline</strong>分别用于将数据存储在本地和数据库中，使用的时候在settings中注释即可，这不是这次的重点，所以不做详细介绍。  </li>
<li>其他扩展<br>为了方便扩展，我将城市code和职位写在了settings中，然后在start_requests中进行遍历，具体的用法可以在<a href="https://github.com/Clay97/bossCrawl" target="_blank" rel="noopener">github</a>中查看：</li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">def start_requests(self):</span><br><span class="line">    for job in self.settings.get(&apos;QUERY&apos;):</span><br><span class="line">        for code in self.settings.get(&apos;CITY_CODE&apos;):</span><br><span class="line">            url =&apos;https://www.zhipin.com/c&apos;+code+&apos;/?query=&apos;+quote(job)+&apos;&amp;page=1&apos;</span><br><span class="line">            print(url)</span><br><span class="line">            yield scrapy.Request(url=url,callback=self.parse)</span><br></pre></td></tr></table></figure>
<p>此外还可以添加随机的User-Agent的下载中间件，禁用cookies，设置下载延时和自动限速。至此，整个项目就完成了，希望对大家有所帮助。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/30/scrapy爬取boss直聘职位信息/" data-id="cjxq28a6e0000k0uaykpvxfwy"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
        <article id="post-scrapyd部署爬虫遇到的问题" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/06/14/scrapyd部署爬虫遇到的问题/">scrapyd部署爬虫遇到的问题</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/06/14/scrapyd部署爬虫遇到的问题/" class="article-date">
  <time datetime="2019-06-14T07:04:46.112Z" itemprop="datePublished">2019-06-14</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>在使用scrapyd部署查看job时出现以下错误：</p>
<p><img src="/images/scrapydError.png" alt="">  </p>
<p>刚开始的时候并没有太注意，后来在启动部署的爬虫是也出现这样的错误，然后便在网上查了一下并找到了解决方法：<br>1.卸载原有的Twisted<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip uninstall Twisted</span><br></pre></td></tr></table></figure></p>
<p>2.安装Twisted以前的版本<br>直接通过pip install 安装会出现错误，所以大家可以使用.whl文件安装的方式安装。之后就可以用scrapyd部署自己的爬虫了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/14/scrapyd部署爬虫遇到的问题/" data-id="cjxq28a860005k0uanmiaq9uf"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
        <article id="post-分析Ajax爬取今日头条街拍美图" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/06/04/分析Ajax爬取今日头条街拍美图/">分析Ajax爬取今日头条街拍美图</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/06/04/分析Ajax爬取今日头条街拍美图/" class="article-date">
  <time datetime="2019-06-04T06:26:11.942Z" itemprop="datePublished">2019-06-04</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>大家好，我又回来了，在这消失的两个多月期间，一直在备战软考程序设计师，不管最终结果如何，我在这两个月期间学到了很多东西，而且还接触了python开始了自己的爬虫生涯。<br>今天就和大家分享《Python 3网络爬虫开发实战》上关于爬取今日头条街拍美图的爬虫。由于书本是两年前发布的，网站的的Ajax发生了变化，但是分析起来也并没有想象的那么复杂，接下来我就大家一起来分析一下这个案列，代码已经上传到我的<a href="https://github.com/Clay97/toutiao" target="_blank" rel="noopener">github</a>欢迎大家参考并提出意见。<br>首先，我们打开<a href="https://www.toutiao.com/" target="_blank" rel="noopener">今日头条</a>并在右上角的搜索入口输入街拍进行搜索。这时打开开发者工具，切换至Network，并选中XHR，接着下拉网页，便会出现很多请求，这就是我们需要分析的Ajax。  </p>
<p><img src="/images/jiepai.png" alt=""></p>
<p>通过对比多个请求参数，我们可以其中变化的只有<strong>offset</strong>和<strong>timestamp</strong>，其中offset是偏移量，timestamp是毫秒级别的时间戳，可以通过<strong>int(time.time*1000)</strong>获得。接下来我们就构造请求来访问网页。    </p>
<pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">get_page</span><span class="params">(offsetp)</span>:</span>
    <span class="comment">#offstep 作为参数传入</span>
    t = time.time()
    <span class="comment">#时间戳</span>
    timestamp = int(t * <span class="number">1000</span>)
    params = {
        <span class="string">'aid'</span>: <span class="number">24</span>,
        <span class="string">'app_name'</span>: <span class="string">'web_search'</span>,
        <span class="string">'offset'</span>: offsetp,
        <span class="string">'format'</span>: <span class="string">'json'</span>,
        <span class="string">'keyword'</span>: <span class="string">'街拍'</span>,
        <span class="string">'autoload'</span>: <span class="string">'true'</span>,
        <span class="string">'count'</span>: <span class="number">20</span>,
        <span class="string">'en_qc'</span>: <span class="number">1</span>,
        <span class="string">'cur_tab'</span>: <span class="number">1</span>,
        <span class="string">'from'</span>: <span class="string">'search_tab'</span>,
        <span class="string">'timestamp'</span>: timestamp
    }
    <span class="comment">#请求头中Cookie是必须的，否则无法返回预期的json数据</span>
    headers = {
        <span class="string">'User-Agent'</span>: <span class="string">'Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:67.0) Gecko/20100101 Firefox/67.0'</span>,
        <span class="string">'Cookie'</span>: <span class="string">'tt_webid=6698224417073694219; UM_distinctid=16b1c89b4891dc-07c5eab40102ac-4c312d7d-100200-16b1c89b48a400; csrftoken=f2f895fa787b16b95088a70f7de231c9; __tasessionId=v9ffxsrfd1559551950358; CNZZDATA1259612802=1433961361-1559551484-https%253A%252F%252Flanding.toutiao.com%252F%7C1559551484; s_v_web_id=72ad7620bc7eee5c573a2fe6966db22e'</span>
    }
    <span class="keyword">try</span>:
        r = requests.get(<span class="string">'https://www.toutiao.com/api/search/content/?'</span>, headers=headers, params=params)
        <span class="keyword">if</span> r.status_code == <span class="number">200</span>:
            <span class="keyword">return</span> r.json()
    <span class="keyword">except</span> requests.ConnectionError :
        <span class="keyword">return</span> <span class="keyword">None</span>
</code></pre>
<p>偏移量offset作为参数传递，时间戳通过time方法生成，其中headers中Cookit参数是必不可少的，否则无法返回预期的json数据，最后通过requests进行请求，如果返回状态码200，则调用response的json()方法将结果转为json格式。<br>接下来实现解析方法，保存图片链接，并和图片所属的标题一起返回，此时构造一个生成器。</p>
<pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">get_images</span><span class="params">(json)</span>:</span>
    <span class="keyword">if</span> json.get(<span class="string">'data'</span>):
        <span class="keyword">for</span> item <span class="keyword">in</span> json.get(<span class="string">'data'</span>):
            title = item.get(<span class="string">'title'</span>)
            <span class="keyword">if</span> (title == <span class="keyword">None</span>):
                <span class="keyword">continue</span>
            images = item.get(<span class="string">'image_list'</span>)
            <span class="keyword">for</span> image <span class="keyword">in</span> images:
                <span class="keyword">yield</span> {
                    <span class="string">'image'</span>: image.get(<span class="string">'url'</span>),
                    <span class="string">'title'</span>: title
                }

</code></pre>
<p>分析返回的json数据，发现所有图片的标题和链接都在<strong>data</strong>下，获取data并遍历，其中’title’字段保存了标题，其中标题为None的通常不是我们所需要的信息，直接跳过。最后通过’image_list’字段获取url列表，通过遍历构造生成器。<br>接下来实现对图片的保存，在该方法中，首先根据item的title来创建文件夹，创建文件中出现异常直接返回，然后请求图片链接，获取图片二进制数据，以二进制形式写入文件。图片名称使用内容的md5值，达到去重目的。  </p>
<pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">save_image</span><span class="params">(item)</span>:</span>
    title = item.get(<span class="string">'title'</span>)
    <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(title):
        <span class="keyword">try</span>:
            os.mkdir(title)
        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
            print(e)
            <span class="keyword">return</span>
    <span class="keyword">try</span>:
        response = requests.get(item.get(<span class="string">'image'</span>))
        <span class="keyword">if</span> response.status_code == <span class="number">200</span>:
            file_path = <span class="string">'{0}/{1}.{2}'</span>.format(title,md5(response.content).hexdigest(),<span class="string">'jpg'</span>)
            <span class="keyword">if</span> <span class="keyword">not</span> os.path.exists(file_path):
                <span class="keyword">with</span> open(file_path,<span class="string">'wb'</span>) <span class="keyword">as</span> f:
                    f.write(response.content)
            <span class="keyword">else</span>:
                print(<span class="string">'Aready Download'</span>,file_path)
    <span class="keyword">except</span> requests.ConnectionError :
        print(<span class="string">"Failed to save image"</span>)
</code></pre>
<p>最后，构造函数来遍历offset，提取图片链接，并下载：</p>
<pre><code class="python"><span class="function"><span class="keyword">def</span> <span class="title">main</span><span class="params">(offset)</span>:</span>
    print(offset)
    json = get_page(offset)
    <span class="keyword">for</span> item <span class="keyword">in</span> get_images(json):
        print(item)
        save_image(item)
        time.sleep(<span class="number">1</span>)

<span class="keyword">if</span>  __name__ == <span class="string">"__main__"</span>:
    pool = Pool()
    pool.map(main, [i*<span class="number">20</span> <span class="keyword">for</span> i <span class="keyword">in</span> range(<span class="number">10</span>)])
    pool.close()
    pool.join()
    print(<span class="string">"OK"</span>)

</code></pre>
<p>至此整个项目就完成了，最后我发现想爬取其他内容的图片，只需要将params中<strong>keyword</strong>的值修改即可，又兴趣的可以进行尝试，谢谢大家的阅读。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/06/04/分析Ajax爬取今日头条街拍美图/" data-id="cjxq28a9v0007k0ua9b4yvivx"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
        <article id="post-安卓文件存储中遇到的问题" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/03/07/安卓文件存储中遇到的问题/">安卓文件存储中遇到的问题</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/03/07/安卓文件存储中遇到的问题/" class="article-date">
  <time datetime="2019-03-07T14:15:24.924Z" itemprop="datePublished">2019-03-07</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>今天在Android实训课上老师要求我们通过使用文件存储方式完成对qq密码的保存，并获取保存的文件中的qq账号密码。我写了下面的实现类来保存qq密码，并获取账号和密码。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">   public class FileSaveQQ &#123;</span><br><span class="line">   //保存qq账号和密码data.txt文件中</span><br><span class="line">    public  static boolean saveUserInfo(Context context,String number ,String password)&#123;</span><br><span class="line">        try &#123;</span><br><span class="line">            FileOutputStream fos =context.openFileOutput(&quot;data.txt&quot;,Context.MODE_PRIVATE);</span><br><span class="line">            fos.write((number+&quot;:&quot;+password).getBytes());</span><br><span class="line">            fos.close();</span><br><span class="line">            return true;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return  false;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    //从data.txt中获取存储的qq账号和密码</span><br><span class="line">    public static Map&lt;String,String&gt; getUserInfo(Context context)&#123;</span><br><span class="line">        String content =&quot;&quot;;</span><br><span class="line">        try &#123;</span><br><span class="line"></span><br><span class="line">            FileInputStream fis=context.openFileInput(&quot;data.txt&quot;);</span><br><span class="line">            byte[]  buffer=new byte[fis.available()];</span><br><span class="line">            fis.read(buffer);</span><br><span class="line">            content= new String(buffer);</span><br><span class="line">            Map&lt;String,String&gt; userMap= new HashMap&lt;String,String&gt;();</span><br><span class="line">            String[] infos=content.split(&quot;:&quot;);</span><br><span class="line">            userMap.put(&quot;number&quot;,infos[0]);</span><br><span class="line">            userMap.put(&quot;password&quot;,infos[1]);</span><br><span class="line">            fis.close();</span><br><span class="line">            return  userMap;</span><br><span class="line">        &#125; catch (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">            return null;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>当把整个逻辑代码写完运行到模拟器上时，后台报错 <strong>FileInputStream fis=context.openFileInput(“data.txt”)</strong> 找不到data.txt，于是我打开DDMS发现无法打开data下面的文件，于是百度寻找解决方法，发现data文件夹的读写权限只对用户组内的用户开放，对其他用户不开放，所以我们只需要把读写权限赋予其他用户即可，具体步骤如下所示：<br>1.进入Android　SDK安装目录，找到<strong>platform-tools</strong>点击进去，按shift键并点击鼠标右键选择在命令行打开<br>2.输入<strong>adb shell</strong>　回车，然后再输入<strong> su</strong> 回车进入权限root模式<br>3.输入<strong>chmod -R 777 /data/</strong>　回车即可。（-R　是对该目录下所有文件夹都执行此操作）<br>这样我们就拥有对data下的文件的读写权限了，但是当我找到data.txt准备把他导出来查看里里面的信息时，发现这时候又报错了（难受），<strong>Failed to pull selection: open failed: Permission denied</strong>,意思是传输失败，没有权限，操作被拒绝。我们只需要在Android sdk目录下的platform-tools打开windows命令行执行adb root指令即可。<br>到此问题都完美解决，我们就可以通过把data.txt文件导出来查看我们写入的内容了。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/07/安卓文件存储中遇到的问题/" data-id="cjxq28aad0009k0ua4t5v8inf"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
        <article id="post-Android第一行代码 酷欧天气总结" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2019/03/04/Android第一行代码 酷欧天气总结/">Android第一行代码 酷欧天气总结</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2019/03/04/Android第一行代码 酷欧天气总结/" class="article-date">
  <time datetime="2019-03-04T01:36:02.334Z" itemprop="datePublished">2019-03-04</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>距离上次写博客大概已经过了半年了，期间一直在在学习《第一行代码》，<br>前几天用了一周多了时间把最后的酷欧天气项目完成了，总体来说还是顺利的，<br>中间遇到了一些困难，这里就在这里总结一下，希望对大家的学习有所帮助，代码在我的GitHub上<a href="https://github.com/Clay97/coolweather" target="_blank" rel="noopener">酷欧天气</a>，如果有需要大家可以下载参考，有什么错误也请大家能够指出来，我们一起学习。  </p>
<h2 id="1-目录结构"><a href="#1-目录结构" class="headerlink" title="1. 目录结构"></a>1. 目录结构</h2><p><strong>db</strong>:用于存放数据库模型相关的代码<br><strong>gson</strong>:用于存放GSON模型相关的代码<br><strong>service</strong>:用于存放服务相关的代码<br><strong>util</strong>:用于存放工具相关的代码</p>
<h2 id="2-创建数据库和表"><a href="#2-创建数据库和表" class="headerlink" title="2. 创建数据库和表"></a>2. 创建数据库和表</h2><p>在创建数据库和表之前，在<strong>app/build.gradle</strong>中声明项目所需的各种依赖。<strong>OkHtttp</strong>用于进行网络请求，<strong>GSON</strong>用于解析JSON数据，<strong>Glide</strong>用于加载和展示图片。  这部分的内容比较简单，大家只需要按照书的内容一步一步来就可以了，首先创建Provincce,City,County这3个类并继承DataSupport，然后新建assets目录，创建 litepal.xml资源文件，用于创建数据库名称、数据库版本、表名、数据库存放的位置，最后再配置LitePalApplication。</p>
<h2 id="3-遍历全国省市县数据"><a href="#3-遍历全国省市县数据" class="headerlink" title="3. 遍历全国省市县数据"></a>3. 遍历全国省市县数据</h2><p>全国省市县的数据都需要从服务器端获取，因此首先在util包下创建一个HttpUtil类  </p>
<pre><code>  public class HttpUtil {
    public  static  void sendOkHttpRequest(String address,okhttp3.Callback callback){
        OkHttpClient client =new OkHttpClient();
        Request request = new Request.Builder().url(address).build();
        client.newCall(request).enqueue(callback);
    }
}
</code></pre><p>这样我们只需要传入请求地址，并注册一个回调来处理服务器响应就可以了。<br>由于服务器返回的都是JSON数据，创建Utility用于解析数据，注意调用save（）方法对数据进行保存，我第一次就是在这里栽了跟头，所以大家写代码的时候还是要细心一点。这部并没有什么难点，只需要照书上的代码就可以了。另外因为向服务器发起请求需要联网，所以必须在AndroidManifest.xml中进行网络的权限声明。</p>
<h2 id="4-显示天气信息"><a href="#4-显示天气信息" class="headerlink" title="4. 显示天气信息"></a>4. 显示天气信息</h2><p>这部分大概是最难的地方，当我按照书上代码解析数据时，总是闪退，后来通过搜索发现书上用的api已经过时了，所以解析不出来数据导致报错，于是我查找了官方文档，找到了相应的api，因为解析的数据有所不同，所以必须重新定义GSON实体类用于解析，相对与书本上的api，官方最新的实况天气的api相对简单，并没有预报和建议，于是我便添加了空气质量实况的api，定义了GSON实体类并解析数据，解析过程和书上的weather类似，大家可以参考我的代码。<br>另外api中请求URL需要传入key值，这里的key是我们在注册完和风天气后在应用管理里面添加的key，在添加的时候key的类型要要选择成<strong>Web API</strong> 否则无法返回数据。<br>在遍历空气质量实况中的数据时，通过inflater获取了view,然后在获取的组件的时候，我习惯性的直接用 findViewByid() 之后在向组件中添加信息的时候总是报空指针异常，后来经过反复检查才发现问题，获取控件的时候应该调用 <strong>view.findViewById()</strong>,写代码的时候不能随心所以，不可有一点马虎，否则就将造成打错。<br>后面获取每日一图就相对容易一点，使用Glide就可以简单的解决。</p>
<h2 id="5-手动更新天气和切换城市"><a href="#5-手动更新天气和切换城市" class="headerlink" title="5. 手动更新天气和切换城市"></a>5. 手动更新天气和切换城市</h2><p>这里首先运用了下拉刷新，下拉时重新请求服务器，数据解析完毕加载页面后关闭下拉刷新，隐藏进度条，整体的逻辑还是比较清楚的。<br>切换城市运用了DrawerLayout,DrawerLayout中第一个子控件用于作为主屏幕中的内容，我们把SwipeRefreshLayout添加进去，第二个子控件作为滑动菜单显示的内容，只需要把第二个子控件的位置添加用于便利省市县数据的碎片。之后重写碎片中的代码就可以了。<br>但是我发现当我手动选择完城市立即下拉刷新的时候，界面中显示的内容会变成刷新之前的城市的数据，通过对代码的观察，我发现下拉刷新调用的 requestWeather(mWeatherId) 中mWeatherId 并没有给他重新赋值，所以他还是原来城市的id，于是我在requestWeather(final String weatherid)方法中加入了 mWeatherId =weatherid; 因为选择县之后也会调用这个方法，这样我们就可以把新的县的id传入到这个全局变量中，从而使id变成选中之后的id。</p>
<h2 id="6-后台自动更新天气并修改图标和用户名称"><a href="#6-后台自动更新天气并修改图标和用户名称" class="headerlink" title="6. 后台自动更新天气并修改图标和用户名称"></a>6. 后台自动更新天气并修改图标和用户名称</h2><p>这部分内容包括更新天气和每日一图，只需要设置闹钟，重新解析数据并启动服务就可以了。至于修改图标和用户名就更简单不过了，相信大家一点也不会陌生。<br>当然除了这些内容，还有很多内容可以去扩展，毕竟比起网上一些有关天气的app，我们的应用还是太过于简单。<br>到这里我的总结也算是完成了，希望对大家有所帮助，也请大家提出宝贵的建议，毕竟我也是第一次写博客，还是个菜鸟很多的地方还是不懂，谢谢大家。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2019/03/04/Android第一行代码 酷欧天气总结/" data-id="cjxq28a9r0006k0ua9as0oev3"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
        <article id="post-Android常见控件" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/07/01/Android常见控件/">Android常见控件</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/07/01/Android常见控件/" class="article-date">
  <time datetime="2018-07-01T10:43:37.885Z" itemprop="datePublished">2018-07-01</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>本文为大家分享了 8 种Android常见控件，主要针对控件的功能和属性对控件进行简单介绍，供大家参考，具体内容如下</p>
<h1 id="1-TextView"><a href="#1-TextView" class="headerlink" title="1. TextView"></a>1. TextView</h1><p>TextView是 Android 程序开发中最常用的控件之一,主要功能是向用户展示文本的内容，它是不可编辑的 ,只能通过初始化设置或在程序中修改。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">TextView</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/text_view"</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">android:Layout_height</span>=<span class="string">"wrap_content"</span>  </span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"This is TextView"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:center">常用属性</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">常用值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">android:id</td>
<td style="text-align:center">给当前控件指定唯一的标识符</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:layout_width</td>
<td style="text-align:center">指定控件的宽度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:Layout_heigh</td>
<td style="text-align:center">指定控件的高度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:text</td>
<td style="text-align:center">指定TextView中的文本显示内容</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:gravity</td>
<td style="text-align:center">指定文字的对齐方式</td>
<td style="text-align:center">top、bottom、left、right、center</td>
</tr>
<tr>
<td style="text-align:center">android:textSize</td>
<td style="text-align:center">指定文字大小</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:textColor</td>
<td style="text-align:center">指定文字颜色</td>
<td style="text-align:center">RGB颜色</td>
</tr>
</tbody>
</table>
<p><strong>android:layout_width</strong>和<strong>android:Layout_heigh</strong>属性中match_parent和fill_parent的意义相同，推荐使用match_parent 表示让当前的控件的大小和父布局的大小一样，也就是由父布局来决定当前控件的大小，wrap_content表示让当前控件的大小能够刚好包含住里面的内容。<br><strong>android:gravity</strong>属性中可用 | 来指定多个值，center效果等同于 center_vertical | center_horizontal,表示文字在垂直和水平方向都居中对齐。</p>
<h1 id="2-EditView"><a href="#2-EditView" class="headerlink" title="2. EditView"></a>2. EditView</h1><p>EditView是Android系统中的编辑框，可以理解为可编辑的TextView，用法和属性都和TextView相似。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">EditText</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/edit_text"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:Layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:hint</span>=<span class="string">"Type something here"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:maxLines</span>=<span class="string">"2"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:center">常用属性</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">常用值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">android:id</td>
<td style="text-align:center">给当前控件指定唯一的标识符</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:layout_width</td>
<td style="text-align:center">指定控件的宽度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:Layout_heigh</td>
<td style="text-align:center">指定控件的高度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:hint</td>
<td style="text-align:center">指定了一段提示文本</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:maxLine</td>
<td style="text-align:center">指定了EditText最大行数</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:password</td>
<td style="text-align:center">输入内容设置为password类型</td>
<td style="text-align:center">true或者false</td>
</tr>
<tr>
<td style="text-align:center">android:phoneNumber</td>
<td style="text-align:center">输入内容设置为phoneNumber类型</td>
<td style="text-align:center">只能输入数字</td>
</tr>
</tbody>
</table>
<p><strong>android:hint</strong>指定了一段提示文本，当我们输入任何内容，这段文本就会自动消失。</p>
<h1 id="3-Button"><a href="#3-Button" class="headerlink" title="3. Button"></a>3. Button</h1><p>Button控件也是使用过程中用的最多的控件之一，用户可以通过单击 Button 来触发一系列事件,然后为 Button 注册监听器,来实现 Button 的监听事件。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">Button</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/button"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:Layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"Button"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textAllCaps</span>=<span class="string">"false"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:center">常用属性</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">常用值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">android:id</td>
<td style="text-align:center">给当前控件指定唯一的标识符</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:layout_width</td>
<td style="text-align:center">指定控件的宽度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:Layout_heigh</td>
<td style="text-align:center">指定控件的高度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:text</td>
<td style="text-align:center">指定按钮显示内容</td>
<td style="text-align:center">自定义</td>
</tr>
</tbody>
</table>
<p>在使用button时我们需要在Activity中为Button的点击事件注册一个监听器，在之后的文章中我们在进行介绍。</p>
<h1 id="4-ImageButton"><a href="#4-ImageButton" class="headerlink" title="4. ImageButton"></a>4. ImageButton</h1><p>ImageButton和Button类似，是一个按钮，ImageButton可以实现我们任何想要的图片按钮的效果。它要比button实现的要好看，并且体验要好很多, 不过它是以图片作为背景，没有文字。利用属性android:src=”图片位置”来设置图片背景。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageButton</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:id</span> = <span class="string">"@+id/image_button"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span>  </span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:src</span> =<span class="string">"@drawable/***"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">常用属性</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">常用值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">android:id</td>
<td style="text-align:center">给当前控件指定唯一的标识符</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:layout_width</td>
<td style="text-align:center">指定控件的宽度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content、像素</td>
</tr>
<tr>
<td style="text-align:center">android:Layout_heigh</td>
<td style="text-align:center">指定控件的高度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content、像素</td>
</tr>
<tr>
<td style="text-align:center">android:src</td>
<td style="text-align:center">指定图片来源</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:scaleType</td>
<td style="text-align:center">指定图片在imagebutton中自适应方式</td>
<td style="text-align:center">自定义</td>
</tr>
</tbody>
</table>
<p>控件大小可以具体设置高度和宽度显示的像素，不过这样设置如果图片尺寸大于设置的显示的尺寸，则图片是显示不全的,可以配合<strong>scaleType</strong>，它的的属性有好几种，分别是matrix（默认）、center、centerCrop、centerInside、fitCenter、fitEnd、fitStart、fitXY。其中fitXY表示把原图按照指定的大小在View中显示，拉伸显示图片，不保持原比例，填满ImageView。对于其他属性我就不为大家进行一一介绍，感兴趣的可以自己了解一下。</p>
<h1 id="5-RadioButton与RadioGroup"><a href="#5-RadioButton与RadioGroup" class="headerlink" title="5. RadioButton与RadioGroup"></a>5. RadioButton与RadioGroup</h1><p>RadioButton(单选按钮)在 Android 平台上也比较常用,比如一些选择项会用到单选按钮。它是一种单个圆形单选框双状态的按钮,可以选择或不选择。在 RadioButton 没有 被选中时,用户通过单击来选中它。但是,在选中后,无法通过单击取消选中。<br>RadioGroup 是单选组合框,用于 将 RadioButton 框起来。在多个 RadioButton被 RadioGroup 包含的情况下,同一时刻只可以选择一个 RadioButton。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">RadioGroup</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:id</span>=<span class="string">"@+id/radio_group"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">        <span class="attr">android:orientation</span>=<span class="string">"horizontal"</span> &gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">RadioButton</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">android:id</span>=<span class="string">"@+id/rd1"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span>         </span></span><br><span class="line"><span class="tag">               <span class="attr">android:text</span>=<span class="string">"北京"</span>   </span></span><br><span class="line"><span class="tag">               <span class="attr">android:textSize</span>=<span class="string">"30sp"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:textColor</span>=<span class="string">"#FF0000"</span></span></span><br><span class="line"><span class="tag">                /&gt;</span></span><br><span class="line">           <span class="tag">&lt;<span class="name">RadioButton</span> </span></span><br><span class="line"><span class="tag">               <span class="attr">android:id</span>=<span class="string">"@+id/rd2"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:textSize</span>=<span class="string">"30sp"</span></span></span><br><span class="line"><span class="tag">               <span class="attr">android:text</span>=<span class="string">"上海"</span> /&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">RadioGroup</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:center">常用属性</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">常用值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">android:id</td>
<td style="text-align:center">给当前控件指定唯一的标识符</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:layout_width</td>
<td style="text-align:center">指定控件的宽度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:Layout_heigh</td>
<td style="text-align:center">指定控件的高度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:orientation</td>
<td style="text-align:center">指定按排列方式</td>
<td style="text-align:center">水平排列horizontal或垂直排列vertical</td>
</tr>
<tr>
<td style="text-align:center">android:text</td>
<td style="text-align:center">设置文字提示</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:textSize</td>
<td style="text-align:center">指定文字大小</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:textColor</td>
<td style="text-align:center">指定文字颜色</td>
<td style="text-align:center">自定义</td>
</tr>
</tbody>
</table>
<h1 id="6-CheckBox"><a href="#6-CheckBox" class="headerlink" title="6. CheckBox"></a>6. CheckBox</h1><p>CheckBox(复选按钮),顾名思义是一种可以进行多选的按钮,默认以矩形表示。与 RadioButton 相同,它也有选中或者不选中双状态。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">CheckBox</span> </span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/cb1"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:text</span>=<span class="string">"北京"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textSize</span>=<span class="string">"30sp"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:textColor</span>=<span class="string">"#0000FF"</span></span></span><br><span class="line">&lt;CheckBox </span><br><span class="line">    android:id="@+id/cb2"</span><br><span class="line">    android:layout_width="match_parent"</span><br><span class="line">    android:layout_height="wrap_content"</span><br><span class="line">    android:text="上海"</span><br><span class="line">    android:textSize="30sp"</span><br><span class="line">    android:textColor="#0000FF"/&gt;</span><br></pre></td></tr></table></figure></p>
<table>
<thead>
<tr>
<th style="text-align:center">常用属性</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">常用值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">android:id</td>
<td style="text-align:center">给当前控件指定唯一的标识符</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:layout_width</td>
<td style="text-align:center">指定控件的宽度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:Layout_heigh</td>
<td style="text-align:center">指定控件的高度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content</td>
</tr>
<tr>
<td style="text-align:center">android:text</td>
<td style="text-align:center">设置文字提示</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:textSize</td>
<td style="text-align:center">指定文字大小</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:textColor</td>
<td style="text-align:center">指定文字颜色</td>
<td style="text-align:center">自定义</td>
</tr>
</tbody>
</table>
<h1 id="7-ImageView"><a href="#7-ImageView" class="headerlink" title="7. ImageView"></a>7. ImageView</h1><p>ImageView 是一个图片控件,负责显示图片，图片的来源可以是系统提供的资源文件,也可以是 Drawable 对象，它与前面我们讲过的ImageButton很多属性都是相同的。 </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ImageView=</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:id</span> = <span class="string">"@+id/xxx"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_width</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:layout_height</span>=<span class="string">"wrap_content"</span> </span></span><br><span class="line"><span class="tag"><span class="attr">android:scaleType</span>=<span class="string">"fitXY"</span></span></span><br><span class="line"><span class="tag"><span class="attr">android:src</span> =<span class="string">"@drawable/***"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">常用属性</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">常用值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">android:id</td>
<td style="text-align:center">给当前控件指定唯一的标识符</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:layout_width</td>
<td style="text-align:center">指定控件的宽度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content、像素</td>
</tr>
<tr>
<td style="text-align:center">android:Layout_heigh</td>
<td style="text-align:center">指定控件的高度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content、像素</td>
</tr>
<tr>
<td style="text-align:center">android:src</td>
<td style="text-align:center">指定图片来源</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:scaleType</td>
<td style="text-align:center">指定图片在imagebutton中自适应方式</td>
<td style="text-align:center">自定义</td>
</tr>
</tbody>
</table>
<h1 id="8-ProgressBar"><a href="#8-ProgressBar" class="headerlink" title="8. ProgressBar"></a>8. ProgressBar</h1><p>ProgressBar 用于在界面上显示一个进度条,表示我们的程序正在加载一些数据，当程序运行后，会看到屏幕中有一个圆形进度条正在旋转。  </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">ProgressBar</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:id</span>=<span class="string">"@+id/progress_bar"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:layout_width</span>=<span class="string">"match_parent"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:Layout_height</span>=<span class="string">"wrap_content"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">style</span>=<span class="string">"?android:attr/progressBarStyleHorizontal"</span></span></span><br><span class="line"><span class="tag">    <span class="attr">android:max</span>=<span class="string">"100"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<table>
<thead>
<tr>
<th style="text-align:center">常用属性</th>
<th style="text-align:center">说明</th>
<th style="text-align:center">常用值</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:center">android:id</td>
<td style="text-align:center">给当前控件指定唯一的标识符</td>
<td style="text-align:center">自定义</td>
</tr>
<tr>
<td style="text-align:center">android:layout_width</td>
<td style="text-align:center">指定控件的宽度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content、像素</td>
</tr>
<tr>
<td style="text-align:center">android:Layout_heigh</td>
<td style="text-align:center">指定控件的高度</td>
<td style="text-align:center">match_parent、fill_parent、wrap_content、像素</td>
</tr>
<tr>
<td style="text-align:center">style</td>
<td style="text-align:center">设置进度条样式</td>
<td style="text-align:center">默认为圆形、progressBarStyleHorizontal（水平进度条）</td>
</tr>
<tr>
<td style="text-align:center">android:max</td>
<td style="text-align:center">设置进度条最大值</td>
<td style="text-align:center">自定义</td>
</tr>
</tbody>
</table>
<p>至此，关于Android的常用控件都已经大概介绍了一遍，希望能够对大家有所帮助。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/01/Android常见控件/" data-id="cjxq28a7u0003k0uafjcrsqch"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
        <article id="post-hello-world" class="article article-type-post" itemscope itemprop="blogPost" data-scroll-reveal>

  <div class="article-inner">
    
      <header class="article-header">
        
  
    <h2 itemprop="name">
      <a class="article-title" href="/2018/07/01/hello-world/">Hello World</a>
    </h2>
  

      </header>
    

    
      <div class="article-meta">
        <a href="/2018/07/01/hello-world/" class="article-date">
  <time datetime="2018-07-01T10:32:30.111Z" itemprop="datePublished">2018-07-01</time>
</a>
        
      </div>
    

    <div class="article-entry" itemprop="articleBody">
      

      

      
        <p>Welcome to <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a>! This is your very first post. Check <a href="https://hexo.io/docs/" target="_blank" rel="noopener">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href="https://hexo.io/docs/troubleshooting.html" target="_blank" rel="noopener">troubleshooting</a> or you can ask me on <a href="https://github.com/hexojs/hexo/issues" target="_blank" rel="noopener">GitHub</a>.</p>
<h2 id="Quick-Start"><a href="#Quick-Start" class="headerlink" title="Quick Start"></a>Quick Start</h2><h3 id="Create-a-new-post"><a href="#Create-a-new-post" class="headerlink" title="Create a new post"></a>Create a new post</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo new <span class="string">"My New Post"</span></span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/writing.html" target="_blank" rel="noopener">Writing</a></p>
<h3 id="Run-server"><a href="#Run-server" class="headerlink" title="Run server"></a>Run server</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo server</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/server.html" target="_blank" rel="noopener">Server</a></p>
<h3 id="Generate-static-files"><a href="#Generate-static-files" class="headerlink" title="Generate static files"></a>Generate static files</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo generate</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/generating.html" target="_blank" rel="noopener">Generating</a></p>
<h3 id="Deploy-to-remote-sites"><a href="#Deploy-to-remote-sites" class="headerlink" title="Deploy to remote sites"></a>Deploy to remote sites</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ hexo deploy</span><br></pre></td></tr></table></figure>
<p>More info: <a href="https://hexo.io/docs/deployment.html" target="_blank" rel="noopener">Deployment</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2018/07/01/hello-world/" data-id="cjxq28a820004k0uap8j6ocv8"
         class="article-share-link">Share</a>
      
    </footer>

  </div>

  

  

</article>



      
  </article>
  
  
</section>
</div>

  <footer class="footer">
  
  <div class="outer">
    <div class="float-right">
      <ul class="list-inline">
  
    <li><i class="fe fe-smile-alt"></i> <span id="busuanzi_value_site_uv"></span></li>
  
</ul>
    </div>
    <ul class="list-inline">
      <li>&copy; 2019 Keep Running</li>
      <li>Powered by <a href="http://hexo.io/" target="_blank">Hexo</a></li>
      <li>Theme  <a href="https://github.com/zhwangart/hexo-theme-ocean">Ocean</a></li>
    </ul>
  </div>
</footer>

</main>
<aside class="sidebar">
  <button class="navbar-toggle"></button>

<nav class="navbar">
  
    <div class="logo">
      <a href="/"><img src="/images/hexo.svg" alt="Keep Running"></a>
    </div>
  
  <ul class="nav nav-main">
    
      <li class="nav-item">
        <a class="nav-item-link" href="/">Home</a>
      </li>
    
      <li class="nav-item">
        <a class="nav-item-link" href="/archives">Archives</a>
      </li>
    
    <li class="nav-item">
      <a class="nav-item-link nav-item-search" title="Search">
        <i class="fe fe-search"></i>
        Search
      </a>
    </li>
  </ul>
</nav>

<nav class="navbar navbar-bottom">
  <ul class="nav">
      <li class="nav-item">
          <div class="totop" id="totop">
    <i class="fe fe-rocket"></i>
</div>
      </li>
    <li class="nav-item">
      
    </li>
  </ul>
</nav>

<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
</aside>
<script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/lazyload.min.js"></script>
<script src="/js/busuanzi-2.3.pure.min.js"></script>


  <script src="/fancybox/jquery.fancybox.min.js"></script>



  <script src="/js/search.js"></script>


<script src="/js/ocean.js"></script>

</body>
</html>